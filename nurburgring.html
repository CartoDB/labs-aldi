<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Deep-Insights.js – Car in nurburgring</title>
  <meta name=viewport content="width=device-width initial-scale=1">
  <link href="./dist/themes/css/cartodb.css" rel="stylesheet" />
  <link href="./dist/themes/css/deep-insights.css" rel="stylesheet" />
  <script src="./dist/cartodb.uncompressed.js"></script>
  <script src="./dist/cartodb.mod.torque.uncompressed.js"></script>
  <script src="./dist/deep-insights.js"></script>
  <style type="text/css">
    html,
    body {
      position: relative;
      height: 100%;
      padding: 0;
      margin: 0;
    }
  </style>
</head>

<body>

  <div id="dashboard"></div>

  <script>
    window.onload = function() {
      var diJSON = {
        "title": "Car in nurburgring",
        "description": "carrs",
        "user": {
          "fullname": "Emilio García",
          "avatar_url": "https://s3.amazonaws.com/com.cartodb.users-assets.production/production/piensaenpixel/assets/20150507074635Captura%20de%20pantalla%202015-05-07%20a%20la%28s%29%2009.46.28.png"
        },
        "updated_at": "2015-11-30T11:50:30+00:00",

        "datasource": {
          "type": "public_map",
          "user_name": "rochoa-st-ded02",
          "maps_api_template": "https://{user}.cartodb-staging.com:443",
          "stat_tag": "ece6faac-7271-11e5-a85f-04013fc66a01",
          "force_cors": true // This is sometimes set in the editor
        },

        "widgets": {
          "histogram_widget_price": {
            "layerId": "3fd7550f-3d7b-4ae5-98cb-58d4fe42a100",
            "type": "histogram",
            "title": "Speed",
            "column": "vel",
            "bins": 10
          },
          "histogram_widget_ax": {
            "layerId": "3fd7550f-3d7b-4ae5-98cb-58d4fe42a100",
            "type": "histogram",
            "title": "Ax",
            "column": "ax",
            "bins": 10
          },
          "histogram_widget_ay": {
            "layerId": "3fd7550f-3d7b-4ae5-98cb-58d4fe42a100",
            "type": "histogram",
            "title": "Ay",
            "column": "ay",
            "bins": 10
          },
          "histogram_widget_az": {
            "layerId": "3fd7550f-3d7b-4ae5-98cb-58d4fe42a100",
            "type": "histogram",
            "title": "Az",
            "column": "az",
            "bins": 10
          },
          "time_series_widget_uuid": {
            "layerId": "3fd7550f-3d7b-4ae5-98cb-58d4fe42a100",
            "type": "time-series",
            "column": "time",
            "bins": 512
          },
        },

        "vizJSON": {
          "id": "84ec6844-4b4b-11e5-9c1d-080027880ca6",
          "version": "0.1.0",
          "likes": 0,
          "scrollwheel": false,
          "legends": true,
          "url": null,
          "map_provider": "leaflet",
          "bounds": [
            [
              50.33527145087772,
              6.865253448486328
            ],
            [
              50.385537663600836,
              7.068843841552734
            ]
          ],
          "center": "[50.36041121120376, 6.967048645019531]",
          "zoom": 13,
          "layers": [{
            "options": {
              "visible": true,
              "type": "Tiled",
              "name": "Positron",
              "className": "httpsbasemapscartocdncomlight_nolabelszxypng",
              "base_type": "default",
              "urlTemplate": "http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",
              "minZoom": "0",
              "maxZoom": "18",
              "attribution": "© <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors © <a href= \"http://cartodb.com/attributions#basemaps\">CartoDB</a>",
              "subdomains": "abcd",
              "style": null,
              "read_only": true,
              "category": "CartoDB",
              "order": 0,
              "id": "a4b5985f-5757-4ff3-8957-01e41247318c",
              "parent_id": null
            },
            "infowindow": null,
            "tooltip": null,
            "id": "a4b5985f-5757-4ff3-8957-01e41247318c",
            "order": 0,
            "type": "tiled"
          }, {
            "type": "layergroup",
            "options": {
              "user_name": "rochoa-st-ded02",
              "maps_api_template": "https://{user}.cartodb-staging.com:443",
              "sql_api_template": "https://{user}.cartodb-staging.com:443",
              "tiler_protocol": "http",
              "tiler_domain": "cartodb-staging.com",
              "tiler_port": "80",
              "sql_api_protocol": "http",
              "sql_api_domain": "cartodb-staging.com",
              "sql_api_endpoint": "/api/v2/sql",
              "sql_api_port": 80,
              "filter": "mapnik",
              "layer_definition": {
                "stat_tag": "5b1ab98c-9dba-11e5-bb59-04013fc66a01",
                "version": "1.0.1",
                "layers": [{
                  "id": "3fd7550f-3d7b-4ae5-98cb-58d4fe42a100",
                  "type": "CartoDB",
                  "infowindow": {
                    "fields": [],
                    "template_name": "table/views/infowindow_light",
                    "template": "<div class=\"cartodb-popup v2\">\n  <a href=\"#close\" class=\"cartodb-popup-close-button close\">x</a>\n  <div class=\"cartodb-popup-content-wrapper\">\n    <div class=\"cartodb-popup-content\">\n      {{#content.fields}}\n        {{#title}}<h4>{{title}}</h4>{{/title}}\n        {{#value}}\n          <p {{#type}}class=\"{{ type }}\"{{/type}}>{{{ value }}}</p>\n        {{/value}}\n        {{^value}}\n          <p class=\"empty\">null</p>\n        {{/value}}\n      {{/content.fields}}\n    </div>\n  </div>\n  <div class=\"cartodb-popup-tip-container\"></div>\n</div>\n",
                    "alternative_names": {},
                    "width": 226,
                    "maxHeight": 180
                  },
                  "tooltip": {
                    "fields": [],
                    "template_name": "tooltip_light",
                    "template": "<div class=\"cartodb-tooltip-content-wrapper\">\n  <div class=\"cartodb-tooltip-content\">\n  {{#fields}}\n    {{#title}}\n    <h4>{{title}}</h4>\n    {{/title}}\n    <p>{{{ value }}}</p>\n  {{/fields}}\n  </div>\n</div>",
                    "alternative_names": {},
                    "maxHeight": 180
                  },
                  "legend": {
                    "type": "none",
                    "show_title": false,
                    "title": "",
                    "template": "",
                    "visible": true
                  },
                  "order": 1,
                  "visible": true,
                  "options": {
                    "sql": "select * from car_log_nurburgring_2013_05_30   order by cartodb_id limit 3200",
                    "layer_name": "car_log_nurburgring_2013_05_30",
                    "cartocss": "/** simple visualization */\n\n#car_log_nurburgring_2013_05_30{\n  marker-fill-opacity: 0.9;\n  marker-line-color: #FF5C00;\n  marker-line-width: 1;\n  marker-line-opacity: 1;\n  marker-placement: point;\n  marker-type: ellipse;\n  marker-width: [vel]*0.1;\n  marker-fill: #FF6600;\n  marker-allow-overlap: true;\n}",
                    "cartocss_version": "2.1.1",
                    "interactivity": "cartodb_id",
                    "table_name": "\"\"."
                  }
                }]
              },
              "attribution": "",


            },
          }],
          "overlays": [{
            "type": "share",
            "order": 2,
            "options": {
              "display": true,
              "x": 20,
              "y": 20
            },
            "template": ""
          }, {
            "type": "search",
            "order": 3,
            "options": {
              "display": true,
              "x": 60,
              "y": 20
            },
            "template": ""
          }, {
            "type": "zoom",
            "order": 6,
            "options": {
              "display": true,
              "x": 20,
              "y": 20
            },
            "template": "<a href=\"#zoom_in\" class=\"zoom_in\">+</a> <a href=\"#zoom_out\" class=\"zoom_out\">-</a>"
          }, {
            "type": "loader",
            "order": 8,
            "options": {
              "display": true,
              "x": 20,
              "y": 150
            },
            "template": "<div class=\"loader\" original-title=\"\"></div>"
          }, {
            "type": "logo",
            "order": 9,
            "options": {
              "display": true,
              "x": 10,
              "y": 40
            },
            "template": ""
          }],
          "prev": null,
          "next": null,
          "transition_options": {
            "time": 0
          }
        }
      };

      cartodb.deepInsights.createDashboard('#dashboard', diJSON, {
          no_cdn: false
        })
        .vis
          .done(function(vis, layers) {
            window.vis = vis;
            window.map = vis.getNativeMap();
            window.layers = layers.models[1].layers;
          })
          .error(function(err) {
            console.log(err);
          });
    }
  </script>
</body>

</html>
